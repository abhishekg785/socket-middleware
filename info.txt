what i learnt:

socket.io uses middleware
eg:
io.use(function(socket,next){
	console.log('middleware');
});